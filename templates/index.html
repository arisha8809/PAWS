{% extends 'base.html' %}

{% block title %}PAWS - Your Dog's Best Friend{% endblock %}

{% block content %}
<section class="hero-section">
    <img src="{{ url_for('static', filename='images/dog.gif') }}" alt="Happy dogs playing" class="hero-background">
</section>

<div id="dogProfileModal" class="modal-overlay">
    <div class="modal-content dog-profile-modal">
        <span class="close-modal" id="closeModalBtn">&times;</span>
        <div class="form-title">
            <h2>Create Your Dog's Profile</h2>
            <p>Tell us about your furry friend so we can provide personalized recommendations</p>
        </div>
        <div class="form-container">
            <form id="dogProfileForm" class="animated-form dog-registration-form">
                <div class="form-group">
                    <label for="dogName">Dog's Name</label>
                    <input type="text" id="dogName" name="name" class="animated-input" required>
                    <span class="input-animation"></span>
                </div>
                <div class="form-group">
                    <label for="dogBreed">Breed</label>
                    <input type="text" id="dogBreed" name="breed" class="animated-input" required>
                    <span class="input-animation"></span>
                </div>
                <div class="form-group">
                    <label for="dogAge">Age</label>
                    <input type="number" id="dogAge" name="age" class="animated-input" required>
                    <span class="input-animation"></span>
                </div>
                <div class="form-group">
                    <label for="dogCharacteristics">Special Characteristics</label>
                    <input type="text" id="dogCharacteristics" name="characteristics" class="animated-input">
                    <span class="input-animation"></span>
                </div>
                <button type="submit" class="paw-button dog-profile-button">Register <span class="paw-icon">üêæ</span></button>
            </form>
            <div id="formResponse" class="form-response"></div>
        </div>
    </div>
</div>
<section class="section">
    <div class="section-title">
        <h2>Our Services</h2>
    </div>
    <div class="features-container">
        <div class="feature-card">
            <div class="feature-image">
                <img src="{{ url_for('static', filename='images/training.jpg') }}" alt="Dog Training">
            </div>
            <div class="feature-content">
                <h3>Dog Training</h3>
                <a href="{{ url_for('training') }}" class="paw-button">Learn More <span class="paw-icon">üêæ</span></a>
            </div>
        </div>
        
        <div class="feature-card">
            <div class="feature-image">
                <img src="{{ url_for('static', filename='images/nutrition.png') }}" alt="Dog Nutrition">
            </div>
            <div class="feature-content">
                <h3>Nutrition Guide</h3>
                <a href="{{ url_for('nutrition') }}" class="paw-button">Explore <span class="paw-icon">üêæ</span></a>
            </div>
        </div>
        
        
        <div class="feature-card">
            <div class="feature-image">
                <img src="{{ url_for('static', filename='images/walking.jpg') }}" alt="Dog Walking">
            </div>
            <div class="feature-content">
                <h3>Dog Walking Services</h3>
                <a href="{{ url_for('walking') }}" class="paw-button">Find Walkers <span class="paw-icon">üêæ</span></a>
            </div>
        </div>
        
        <div class="feature-card">
            <div class="feature-image">
                <img src="{{ url_for('static', filename='images/enrichment.png') }}" alt="Dog Enrichment">
            </div>
            <div class="feature-content">
                <h3>Enrichment Activities</h3>
                <a href="{{ url_for('enrichment') }}" class="paw-button">Discover Activities <span class="paw-icon">üêæ</span></a>
            </div>
        </div>
    </div>
</section>

<section class="testimonials-section">
    <div class="section-title">
        <h2>Happy Dog Parents</h2>
    </div>
    <div class="testimonials-container">
        <div class="testimonial-card">
            <div class="testimonial-content">
                <p class="testimonial-text">"PAWS has been a game-changer for me and my Golden Retriever, Max. The training resources helped us overcome his leash-pulling habit, and the community events have been a great way to socialize him!"</p>
                <div class="testimonial-author">
         
                    <div class="testimonial-author-info">
                        <h4>Rohit</h4>
                        <p>Owner of Max, Golden Retriever</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="testimonial-card">
            <div class="testimonial-content">
                <p class="testimonial-text">"I was struggling to find the right nutrition plan for my senior Labrador with dietary restrictions. The personalized recommendations from PAWS made all the difference. His energy levels have improved dramatically!"</p>
                <div class="testimonial-author">
                    <div class="testimonial-author-info">
                        <h4>Riya</h4>
                        <p>Owner of Bruno, Labrador Retriever</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="testimonial-card">
            <div class="testimonial-content">
                <p class="testimonial-text">"As a first-time dog parent, I was overwhelmed with all the information out there. PAWS simplified everything and guided me through the process. The dog walking service has been a lifesaver during my busy work days!"</p>
                <div class="testimonial-author">
                    <div class="testimonial-author-info">
                        <h4>Emily</h4>
                        <p>Owner of Luna, Border Collie Mix</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <p style=" color: #ffffb0;">
        .
    </p>
    <p style=" color: #ffffb0;">
        .
    </p>
    <section class="cta-carousel-section">
        <div class="cta-carousel" id="carousel">
          <img src="/static/images/walking.jpg" alt="Slide 1">
          <img src="/static/images/training.jpg" alt="Slide 2">
          <img src="/static/images/nutrition.png" alt="Slide 3">
          <img src="/static/images/enrichment.png" alt="Slide 1">
          <img src="/static/images/walking.jpg" alt="Slide 2">
          <img src="/static/images/walking.jpg" alt="Slide 3">
        </div>
      </section>   
</section>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/dog-profile.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const dogProfileModal = document.getElementById("dogProfileModal");
        const getStartedBtn = document.getElementById("getStartedBtn");
        const ctaGetStartedBtn = document.getElementById("ctaGetStartedBtn");
        const closeModalBtn = document.getElementById("closeModalBtn");

        const openModal = () => {
            dogProfileModal.style.display = "flex";
            document.body.style.overflow = "hidden"; 
        };

        const closeModal = () => {
            dogProfileModal.style.display = "none";
            document.body.style.overflow = "auto";
        };

        getStartedBtn.addEventListener("click", openModal);
        ctaGetStartedBtn.addEventListener("click", openModal);
        closeModalBtn.addEventListener("click", closeModal);

        window.addEventListener("click", function(event) {
            if (event.target === dogProfileModal) {
                closeModal();
            }
        });

        // Animate elements on scroll (existing code)
        const animateOnScroll = function() {
            const elements = document.querySelectorAll('.feature-card, .testimonial-card');
            elements.forEach(element => {
                const position = element.getBoundingClientRect();
                if(position.top < window.innerHeight && position.bottom >= 0) {
                    element.style.opacity = '1';
                    element.style.transform = 'translateY(0)';
                }
            });
        };

        const elements = document.querySelectorAll('.feature-card, .testimonial-card');
        elements.forEach(element => {
            element.style.opacity = '1';
            element.style.transform = 'translateY(30px)';
            element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        });

        window.addEventListener('scroll', animateOnScroll);
        animateOnScroll();
    });
   
  let isSignup = false;

  function openModal() {
    document.getElementById('auth-modal').style.display = 'block';
  }

  function closeModal() {
    document.getElementById('auth-modal').style.display = 'none';
  }

  function toggleAuthMode() {
    isSignup = !isSignup;
    document.getElementById('modal-title').textContent = isSignup ? 'Sign Up' : 'Login';
    document.getElementById('submit-btn').textContent = isSignup ? 'Sign Up' : 'Login';
    document.getElementById('toggle-form').textContent = isSignup ? 'Already have an account? Log in' : "Don't have an account? Sign up";
  }

  document.getElementById('auth-form').addEventListener('submit', async function(e) {
    e.preventDefault();

    const endpoint = isSignup ? '/api/signup' : '/api/login';
    const formData = {
      username: document.getElementById('username').value,
      email: document.getElementById('email').value,
      password: document.getElementById('password').value
    };

    const response = await fetch(endpoint, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(formData)
    });

    const data = await response.json();

    if (data.success) {
      closeModal();
      document.getElementById('nav-user').innerHTML = `Hi, ${data.username} <img src="/static/profile-icon.png" class="profile-icon" />`;
    } else {
      alert(data.message);
    }
  });
</script>
{% endblock %}

